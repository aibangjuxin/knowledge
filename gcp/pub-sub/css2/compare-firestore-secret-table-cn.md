# Firestore 与 Secret Manager 成本对比表

## 1. 单价对比

| 成本组件 | Cloud Firestore (多区域) | Secret Manager |
| :--- | :--- | :--- |
| **存储 / 活跃项** | **$0.18** / GB / 月 | **$0.06** / 密钥版本 / 位置 / 月 |
| **读取 / 访问操作** | **$0.06** / 100,000 次读取 | **$0.03** / 10,000 次操作 |
| **写入 / 管理操作** | **$0.18** / 100,000 次写入 | **免费** (管理操作) |
| **免费层级 (Free Tier)** | 每天 5万次读取, 2万次写入<br>每月 1 GB 存储 | 每月 6 个活跃版本<br>每月 1万次访问操作 |

> **注意**: 按单次访问计算，Firestore 的读取成本显著更低（约为 Secret Manager 的 **1/50**：$0.0000006 vs $0.000003）。

---

## 2. 月度场景成本分析

**场景基础**: 为 Cloud Scheduler 任务存储认证凭据。
*   **活跃密钥数**: 存储的独立团队凭据数量。
*   **月访问量**: 调度任务获取凭据的总次数。

| 使用级别 | 指标数据 | Firestore 预估成本 | Secret Manager 预估成本 | 成本差异 |
| :--- | :--- | :--- | :--- | :--- |
| **低频使用** | **100** 个密钥<br>**3万** 次访问/月 | **$0.00**<br>*(免费额度内)* | **$6.09**<br>*($6.00 版本费 + $0.09 操作费)* | **+$6.09** |
| **中频使用** | **500** 个密钥<br>**30万** 次访问/月 | **$0.18**<br>*($0.18 操作费 + ~$0 存储)* | **$30.90**<br>*($30.00 版本费 + $0.90 操作费)* | **+$30.72** |
| **高频使用** | **1,000** 个密钥<br>**150万** 次访问/月 | **$0.90**<br>*($0.90 操作费 + ~$0.10 存储)* | **$64.50**<br>*($60.00 版本费 + $4.50 操作费)* | **+$63.60** |

---

## 3. 建议总结

| 特性 | Firestore | Secret Manager | 决策指南 |
| :--- | :--- | :--- | :--- |
| **成本效益** | ✅ **极佳** | ⚠️ 较高 | 如果**预算**是首要考虑，选择 **Firestore**。 |
| **安全性** | ⚠️ 基础 (ACLs) | ✅ **高级** | 如果需要**轮换、版本控制和严格审计**，选择 **Secret Manager**。 |
| **性能** | ✅ 低延迟 | ✅ 低延迟 | 常规读取操作下性能相当。 |
| **运维开销** | ⚠️ 需手动加密 | ✅ 原生支持 | **Secret Manager** 减少了安全处理的开发工作量。 |

## 4. 参考资料

*   **Google Cloud Firestore 定价**: [https://cloud.google.com/firestore/pricing](https://cloud.google.com/firestore/pricing)
*   **Google Cloud Secret Manager 定价**: [https://cloud.google.com/secret-manager/pricing](https://cloud.google.com/secret-manager/pricing)
