# Kubernetes Pod Debug Scripts

è¿™ä¸ªç›®å½•åŒ…å«äº†ç”¨äºè°ƒè¯•Kubernetes Podçš„è„šæœ¬å·¥å…·ã€‚

## æ–‡ä»¶è¯´æ˜

- `side.md` - åŸå§‹è„šæœ¬å’Œæ–‡æ¡£
- `side-optimized.sh` - ä¼˜åŒ–ç‰ˆæœ¬çš„è°ƒè¯•è„šæœ¬
- `optimization-comparison.md` - è¯¦ç»†çš„ä¼˜åŒ–å¯¹æ¯”åˆ†æ
- `test-script.sh` - æµ‹è¯•è„šæœ¬
- `README.md` - æœ¬æ–‡æ¡£

## å¿«é€Ÿå¼€å§‹

### åŸºæœ¬ä½¿ç”¨
```bash
# ä½¿ç”¨ä¼˜åŒ–ç‰ˆæœ¬è„šæœ¬
./side-optimized.sh my-app europe-west2-docker.pkg.dev/project/repo/debug:latest -n production
```

### é«˜çº§é€‰é¡¹
```bash
# è¯¦ç»†è¾“å‡ºæ¨¡å¼
./side-optimized.sh my-app debug:latest -n production --verbose

# è‡ªåŠ¨ç¡®è®¤æ¨¡å¼ (é€‚åˆè‡ªåŠ¨åŒ–)
./side-optimized.sh my-app debug:latest -n production --yes

# æŸ¥çœ‹å¸®åŠ©
./side-optimized.sh --help
```

## ä¸»è¦æ”¹è¿›

### ğŸ› Bugä¿®å¤
- **å…³é”®ä¿®å¤**: åŸè„šæœ¬åªæ˜¾ç¤ºkubectl debugå‘½ä»¤ä½†ä¸æ‰§è¡Œï¼Œç°å·²ä¿®å¤
- æ”¹è¿›äº†é”™è¯¯å¤„ç†å’Œè¾¹ç•Œæƒ…å†µå¤„ç†

### ğŸš€ æ€§èƒ½ä¼˜åŒ–
- æ›´æ™ºèƒ½çš„PodæŸ¥æ‰¾ï¼šç›´æ¥ä½¿ç”¨deploymentçš„selector
- å‡å°‘ä¸å¿…è¦çš„kubectlè°ƒç”¨
- å¹¶è¡ŒéªŒè¯å¤šé¡¹æ£€æŸ¥

### ğŸ›¡ï¸ å®‰å…¨æ€§å¢å¼º
- å¯ç”¨bashä¸¥æ ¼æ¨¡å¼ (`set -euo pipefail`)
- ä¾èµ–æ£€æŸ¥ç¡®ä¿kubectlå¯ç”¨
- Kubernetesè¿æ¥éªŒè¯
- PodçŠ¶æ€æ£€æŸ¥å’Œè­¦å‘Š

### ğŸ¯ ç”¨æˆ·ä½“éªŒæ”¹è¿›
- ç»“æ„åŒ–æ—¥å¿—è¾“å‡º (INFO/WARN/ERROR/DEBUG)
- æ”¯æŒè¯¦ç»†æ¨¡å¼ (`--verbose`)
- æ”¯æŒè‡ªåŠ¨ç¡®è®¤æ¨¡å¼ (`--yes`)
- æ›´æ¸…æ™°çš„å¸®åŠ©ä¿¡æ¯
- æ˜¾ç¤ºPodçŠ¶æ€ä¿¡æ¯

### ğŸ”§ ä»£ç è´¨é‡
- æ¨¡å—åŒ–å‡½æ•°è®¾è®¡
- æ›´å¥½çš„å‚æ•°è§£æ
- å®Œå–„çš„é”™è¯¯å¤„ç†
- ä»£ç æ³¨é‡Šå’Œæ–‡æ¡£

## å…¼å®¹æ€§

ä¼˜åŒ–ç‰ˆæœ¬å®Œå…¨å‘åå…¼å®¹åŸè„šæœ¬çš„ä½¿ç”¨æ–¹å¼ï¼š
```bash
# åŸè„šæœ¬æ ¼å¼ä»ç„¶æœ‰æ•ˆ
./side-optimized.sh deployment-name image:tag -n namespace
```

## å¸¸ç”¨è°ƒè¯•é•œåƒ

è„šæœ¬æ”¯æŒå¤šç§è°ƒè¯•é•œåƒï¼š
- `curlimages/curl:latest` - HTTPè°ƒè¯•
- `nicolaka/netshoot:latest` - ç½‘ç»œè°ƒè¯•å·¥å…·é›†
- `busybox:latest` - è½»é‡çº§å·¥å…·
- `alpine:latest` - è½»é‡çº§Linuxç¯å¢ƒ

## ä½¿ç”¨åœºæ™¯

1. **åº”ç”¨è°ƒè¯•**: æ£€æŸ¥åº”ç”¨å¥åº·çŠ¶æ€ã€é…ç½®ç­‰
2. **ç½‘ç»œè°ƒè¯•**: æµ‹è¯•æœåŠ¡è¿æ¥ã€DNSè§£æç­‰  
3. **æ€§èƒ½åˆ†æ**: æŸ¥çœ‹è¿›ç¨‹ã€å†…å­˜ä½¿ç”¨ç­‰
4. **æ•…éšœæ’æŸ¥**: æ£€æŸ¥æ—¥å¿—ã€æ–‡ä»¶ç³»ç»Ÿç­‰

## æ³¨æ„äº‹é¡¹

- éœ€è¦æœ‰æ•ˆçš„Kubernetesé›†ç¾¤è¿æ¥
- éœ€è¦å¯¹ç›®æ ‡namespaceæœ‰é€‚å½“çš„æƒé™
- è°ƒè¯•é•œåƒéœ€è¦èƒ½å¤Ÿä»é›†ç¾¤è®¿é—®
- ephemeralå®¹å™¨åŠŸèƒ½éœ€è¦Kubernetes 1.23+

## æ•…éšœæ’æŸ¥

å¦‚æœé‡åˆ°é—®é¢˜ï¼Œå¯ä»¥ï¼š
1. ä½¿ç”¨ `--verbose` é€‰é¡¹æŸ¥çœ‹è¯¦ç»†æ—¥å¿—
2. æ£€æŸ¥kubectlè¿æ¥: `kubectl cluster-info`
3. éªŒè¯æƒé™: `kubectl auth can-i create pods --namespace=<namespace>`
4. ç¡®è®¤deploymentå­˜åœ¨: `kubectl get deployments -n <namespace>`